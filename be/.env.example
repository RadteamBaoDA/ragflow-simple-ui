# Server Configuration
PORT=3001
NODE_ENV=development

# Logging Configuration
# Log level: error, warn, info, debug (default: debug in dev, info in prod)
LOG_LEVEL=debug

# Development Server Configuration
# Frontend and backend share the same domain, backend served at /api
DEV_DOMAIN=localhost
DEV_PORT=5173

# HTTPS Configuration (for local development with custom domain)
HTTPS_ENABLED=false
# Additional domains for SSL certificate (comma-separated)
DEV_ADDITIONAL_DOMAINS=kb
# Ignore self-signed certificates (WARNING: INSECURE - Development only)
IGNORE_SELF_SIGNED_CERTS=false

# Shared Storage Domain (for cross-subdomain user info sharing)
# Use parent domain with leading dot (e.g., .abc.com) to share across a.abc.com and b.abc.com
SHARED_STORAGE_DOMAIN=.localhost

# Session Store Configuration
# Options: redis | memory
# Default: redis in production, memory in development
SESSION_STORE=redis

# Database Configuration (PostgreSQL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=knowledge_base
DB_USER=postgres
DB_PASSWORD=change_me

# Redis Configuration (when SESSION_STORE=redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# Session Configuration
SESSION_SECRET=your-session-secret-change-in-production
# Session TTL in days (default: 7 days)
SESSION_TTL_DAYS=7

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:5173

# RAGFlow Configuration
# RAGFlow config is now loaded from JSON file for flexibility
# Default: src/config/ragflow.config.json
# Override with custom path:
# RAGFLOW_CONFIG_PATH=/path/to/ragflow.config.json

# Langfuse Configuration (optional - for future monitoring)
LANGFUSE_SECRET_KEY=sk-lf-xxx
LANGFUSE_PUBLIC_KEY=pk-lf-xxx
LANGFUSE_BASE_URL=https://cloud.langfuse.com

# Microsoft Entra ID (Azure AD) Configuration
AZURE_AD_CLIENT_ID=your-client-id
AZURE_AD_CLIENT_SECRET=your-client-secret
AZURE_AD_TENANT_ID=your-tenant-id
# Callback URL must be registered in Azure Portal
AZURE_AD_REDIRECT_URI=http://localhost:3001/api/auth/callback
# Optional proxy URL for Azure AD requests (e.g., http://proxy.example.com:8080)
AZURE_AD_PROXY_URL=

# Admin API key for authentication
ADMIN_API_KEY=change-me-in-production

#EXTERNAL API Configuration
EXTERNAL_TRACE_ENABLED=true
EXTERNAL_TRACE_API_KEY=change-me-in-production
EXTERNAL_TRACE_CACHE_TTL=300
EXTERNAL_TRACE_LOCK_TIMEOUT=5000


# Enable root login
ENABLE_ROOT_LOGIN=true
KB_ROOT_USER=admin@localhost
KB_ROOT_PASSWORD=admin

# MinIO Configuration
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false

# System Tools Configuration
# System tools config is loaded from JSON file for flexibility
# Default: src/config/system-tools.config.json
# Override with custom path:
# SYSTEM_TOOLS_CONFIG_PATH=/path/to/system-tools.config.json

# External Trace API Configuration
# Allows external systems to submit trace data for Langfuse tracing
EXTERNAL_TRACE_ENABLED=true
# API key for external system authentication (optional, leave empty to skip)
EXTERNAL_TRACE_API_KEY=your-external-api-key
# Cache TTL for email validation in seconds (default: 300 = 5 minutes)
EXTERNAL_TRACE_CACHE_TTL=300
# Lock timeout for preventing race conditions in milliseconds
EXTERNAL_TRACE_LOCK_TIMEOUT=5000

# Cache Configuration
# Path to temporary cache directory for file previews
TEMP_CACHE_PATH=./temp
# TTL for cached temp files in milliseconds (default: 7 days)
TEMP_FILE_TTL_MS=604800000
# Cron schedule for temp file cleanup (default: midnight daily)
TEMP_FILE_CLEANUP_SCHEDULE=0 0 * * *
