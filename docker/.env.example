# Knowledge Base Docker Environment Configuration
# Copy this file to .env and modify as needed

# ==========================================================================
# General Settings
# ==========================================================================
NODE_ENV=production
LOG_LEVEL=info
# Ignore self-signed certificates (WARNING: INSECURE - Development only)
IGNORE_SELF_SIGNED_CERTS=false

# ==========================================================================
# Backend Image Settings
# ==========================================================================
# Use local build or pull from registry
BACKEND_IMAGE=knowledge-base-backend
BACKEND_VERSION=latest

# ==========================================================================
# PostgreSQL Configuration
# ==========================================================================
DB_HOST=postgres
DB_NAME=knowledge_base
DB_USER=postgres
DB_PASSWORD=change_me_in_production
DB_PORT=5432

# ==========================================================================
# Redis Configuration
# ==========================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ==========================================================================
# Session Configuration
# ==========================================================================
SESSION_SECRET=change_this_to_a_long_random_string_in_production
SESSION_TTL_DAYS=7

# ==========================================================================
# Shared Storage Domain
# ==========================================================================
# For cross-subdomain cookie sharing, use parent domain with leading dot
# Example: .example.com for app.example.com and api.example.com
SHARED_STORAGE_DOMAIN=.localhost

# ==========================================================================
# Frontend URL
# ==========================================================================
FRONTEND_URL=http://localhost:5173

# ==========================================================================
# Langfuse Configuration (Optional)
# ==========================================================================
LANGFUSE_SECRET_KEY=
LANGFUSE_PUBLIC_KEY=
LANGFUSE_BASE_URL=https://cloud.langfuse.com

# ==========================================================================
# Azure AD (Entra ID) Configuration
# ==========================================================================
AZURE_AD_CLIENT_ID=
AZURE_AD_CLIENT_SECRET=
AZURE_AD_TENANT_ID=
AZURE_AD_REDIRECT_URI=http://localhost:3001/api/auth/callback
# Optional proxy URL for Azure AD requests
NODE_USE_ENV_PROXY=1
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=
# ==========================================================================
# Admin Configuration
# ==========================================================================
ADMIN_API_KEY=change_me_in_production
ENABLE_ROOT_LOGIN=false
KB_ROOT_USER=admin@localhost
KB_ROOT_PASSWORD=admin

# ==========================================================================
# MinIO Configuration
# ==========================================================================
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_USE_SSL=false

# ==========================================================================
# External Config Files (JSON)
# ==========================================================================
# These configs can be customized via Docker volume mount at /app/config/
# Or set custom paths via environment variables below.
#
# System Tools: Configure monitoring tools displayed in the UI
# SYSTEM_TOOLS_CONFIG_PATH=/app/config/system-tools.config.json
#
# RAGFlow: Configure AI Chat and Search iframe URLs and sources
# RAGFLOW_CONFIG_PATH=/app/config/ragflow.config.json
